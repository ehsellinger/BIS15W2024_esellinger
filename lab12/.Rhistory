geom_bar()
surgery %>%
filter(race != "NA") %>%
count(race) %>%
ggplot(aes(x = reorder(race, n), y = n)) +
geom_col()
surgery %>%
filter(race != "NA") %>%
count(race) %>%
ggplot(aes(x = reorder(race, n), y = n)) +
geom_col() +
labs(title = "Participant Race Counts",
x = "Race",
y = "Count")
surgery %>%
filter(race != "NA") %>%
count(race) %>%
ggplot(aes(x = reorder(race, n), y = n)) +
geom_col(aes(fill = race)) +
labs(title = "Participant Race Counts",
x = "Race",
y = "Count")
surgery %>%
filter(race != "NA") %>%
count(race) %>%
ggplot(aes(x = reorder(race, n), y = n)) +
geom_col(aes(fill = race)) +
guides(fill = FALSE) +
labs(title = "Participant Race Counts",
x = "Race",
y = "Count")
surgery %>%
group_by(gender) %>%
summarize(mean_age = mean(age))
surgery %>%
filter(age != "NA") %>%
filter(gender != "NA") %>%
group_by(gender) %>%
summarize(mean_age = mean(age))
surgery <- surgery %>%
filter(age != "NA") %>%
filter(gender != "NA")
surgery %>%
ggplot(aes(x = gender, y = age)) +
geom_boxplot()
surgery %>%
ggplot(aes(x = gender, y = age)) +
geom_boxplot(aes(fill = gender)) +
guides(fill = FALSE) +
labs(title = "Participant Age Range by Gender",
x = "Gender",
y = "Age")
View(surgery)
surgery %>%
count(asa_status)
surgery %>%
filter(asa_status != "NA") %>%
count(asa_status) %>%
ggplot(aes(x = asa_status, y = n)) +
geom_col(aes(fill = asa_status)) +
guides(fill = FALSE) +
labs(title = "Participant Heath by ASA Status",
x = "American Society of Anesthesiologist Physical Status",
y = "count")
surgery %>%
filter(asa_status != "NA") %>%
count(asa_status) %>%
ggplot(aes(x = asa_status, y = n)) +
geom_col(aes(fill = asa_status)) +
guides(fill = FALSE) +
labs(title = "Participant Heath by ASA Status",
x = "American Society of Anesthesiologist Physical Status",
y = "Count")
surgery %>%
filter(asa_status != "NA") %>%
filter(bmi != "NA") %>%
ggplot(aes(x = bmi)) +
facet_grid(asa_status ~.) +
geom_density(fill="deepskyblue4", alpha  =0.4, color = "black") +
labs(title = "Distribution of BMI by ASA Status")
surgery %>%
filter(asa_status != "NA") %>%
filter(bmi != "NA") %>%
ggplot(aes(x = bmi)) +
facet_grid(.~asa_status) +
geom_density(fill="deepskyblue4", alpha  =0.4, color = "black") +
labs(title = "Distribution of BMI by ASA Status")
surgery %>%
filter(asa_status != "NA") %>%
filter(bmi != "NA") %>%
ggplot(aes(x = bmi)) +
facet_grid(.~asa_status) +
geom_density(fill="deepskyblue4", alpha  =0.4, color = "black") +
labs(title = "Distribution of BMI by ASA Status",
x = "Body Mass Index",
y = NULL)
surgery %>%
filter(ahrq_ccs, ccsmort30rate, ccscomplicationrate) %>%
arrange(desc(ccsmort30rate))
surgery %>%
select(ahrq_ccs, ccsmort30rate, ccscomplicationrate) %>%
arrange(desc(ccsmort30rate))
surgery %>%
select(ahrq_ccs, ccscomplicationrate) %>%
arrange(desc(ccscomplicationrate))
surgery %>%
select(ahrq_ccs, ccsmort30rate) %>%
arrange(desc(ccsmort30rate))
surgery %>%
group_by(ahrq_ccs) %>%
select(ahrq_ccs, ccsmort30rate) %>%
arrange(desc(ccsmort30rate))
surgery %>%
select(ahrq_ccs, ccsmort30rate) %>%
arrange(desc(ccsmort30rate))
surgery %>%
select(ahrq_ccs, ccsmort30rate) %>%
arrange(desc(ccsmort30rate))
surgery %>%
select(ahrq_ccs, ccscomplicationrate) %>%
arrange(desc(ccscomplicationrate))
surgery %>%
select(ahrq_ccs, ccsmort30rate)
surgery %>%
select(ahrq_ccs, ccsmort30rate) %>%
arrange(desc(ccsmort30rate))
surgery %>%
ggplot(aes(x = ahrq_ccs, y = ccsmort30rate)) +
geom_col()
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate)) +
geom_col() +
coord_flip()
surgery %>%
ggplot(aes(x = reorder(ccsmort30rate, ahrq_ccs), y = ccsmort30rate)) +
geom_col() +
coord_flip() +
labs()
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate)) +
geom_col() +
coord_flip() +
labs()
surgery %>%
ggplot(aes(x = ahrq_ccs, y = ccsmort30rate)) +
geom_col() +
coord_flip() +
labs()
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate)) +
geom_col() +
coord_flip() +
labs()
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate)) +
geom_col() +
coord_flip() +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = "Overall 30-day Mortality Rate",
y = "Operation Type")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate)) +
geom_col(aes(fill = ahrq_ccs)) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = "Overall 30-day Mortality Rate",
y = "Operation Type")
surgery %>%
group_by(ahrq_ccs)
surgery %>%
group_by(ahrq_ccs) %>%
summarize(max_risk = max(ccsmort30rate))
arrange(desc(ccsmort30rate))
surgery %>%
group_by(ahrq_ccs) %>%
summarize(max_risk = max(ccsmort30rate)) %>%
arrange(desc(ccsmort30rate))
surgery %>%
group_by(ahrq_ccs) %>%
summarize(max_risk = max(ccsmort30rate)) %>%
arrange(desc(max_risk))
surgery %>%
group_by(ahrq_ccs) %>%
summarize(max_risk = max(ccscomplicationrate)) %>%
arrange(desc(max_risk))
surgery %>%
group_by(ahrq_ccs) %>%
summarize(complication_rate = max(ccscomplicationrate)) %>%
arrange(desc(complication_rate))
surgery %>%
group_by(ahrq_ccs) %>%
summarize(mortality_rate = max(ccsmort30rate)) %>%
arrange(desc(mortality_rate))
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate)) +
geom_col(aes(fill = ahrq_ccs)) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = "Operation Type",
y = "Overall 30-day Mortality Rate")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate)) +
geom_col(aes(fill = ahrq_ccs)) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = "Operation Type",
y = "Overall 30-day Mortality Rate (%)")
knitr::opts_chunk$set(echo = TRUE)
surgery %>% naniar::miss_var_summary()
surgery %>%
ggplot(aes(x=race, fill=race))+
geom_bar(alpha=0.6, color="black")+
labs(title="Participants by Race",
x=NULL,
y="# participants")+
theme_light()
surgery %>%
filter(gender!="NA") %>%
group_by(gender) %>%
summarize(mean_age=mean(age, na.rm=T))
surgery %>%
filter(gender!="NA") %>%
ggplot(aes(x=gender, y=age, fill=gender))+
geom_boxplot(na.rm=T, alpha=0.6)+
labs(title="Range of Participants' Age by Gender",
x=NULL,
y="Age (years)")+
theme_light()
surgery %>%
filter(asa_status!="NA") %>%
ggplot(aes(x=asa_status, fill=asa_status))+
geom_bar(color="black", alpha=0.6)+
labs(title="ASA Status of Participants", x="ASA", y="# Participants")+
theme_light()
surgery %>%
ggplot(aes(x=bmi))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm=T)+
facet_wrap(~asa_status)+
labs(title="Distribution of BMI", x="BMI", y=NULL)+
theme_light()
surgery %>%
group_by(ahrq_ccs) %>%
summarise(ccsmort30rate=mean(ccsmort30rate)) %>%
arrange(desc(ccsmort30rate)) %>%
slice_max(ccsmort30rate, n=5)
surgery %>%
group_by(ahrq_ccs) %>%
summarize(mortality_rate = mean(ccsmort30rate)) %>%
arrange(desc(mortality_rate))
surgery %>%
group_by(ahrq_ccs) %>%
summarize(mortality_rate = mean(ccsmort30rate)) %>%
arrange(desc(mortality_rate))%>%
slice_max(ccsmort30rate, n=5)
surgery %>%
group_by(ahrq_ccs) %>%
summarize(mortality_rate = mean(ccsmort30rate)) %>%
arrange(desc(mortality_rate))%>%
slice_max(mortality_rate, n=5)
surgery %>%
group_by(ahrq_ccs) %>%
summarize(complication_rate = max(ccscomplicationrate)) %>%
arrange(desc(complication_rate)) %>%
slice_max(complication_rate, n=5)
surgery %>%
group_by(ahrq_ccs) %>%
summarise(ccscomplicationrate=mean(ccscomplicationrate)) %>%
arrange(desc(ccscomplicationrate)) %>%
slice_max(ccscomplicationrate, n=5)
surgery %>%
select(ahrq_ccs, ccsmort30rate, ccscomplicationrate) %>%
filter(ahrq_ccs %in% c("Colorectal resection", "Small bowel resection", "Gastrectomy; partial and total", "Endoscopy and endoscopic biopsy of the urinary tract", "Spinal fusion", "Nephrectomy; partial or complete")) %>%
group_by(ahrq_ccs) %>%
summarise(ccsmort30rate=mean(ccsmort30rate),
ccscomplicationrate=mean(ccscomplicationrate))
surgery %>%
select(ahrq_ccs, ccsmort30rate, ccscomplicationrate) %>%
filter(ahrq_ccs %in% c("Colorectal resection", "Small bowel resection", "Gastrectomy; partial and total", "Endoscopy and endoscopic biopsy of the urinary tract", "Spinal fusion", "Nephrectomy; partial or complete")) %>%
group_by(ahrq_ccs) %>%
summarise(ccsmort30rate=mean(ccsmort30rate),
ccscomplicationrate=mean(ccscomplicationrate))
surgery %>%
ggplot(aes(x=ahrq_ccs, y=ccsmort30rate, group=ahrq_ccs))+
geom_col(position="dodge", fill="steelblue", alpha=0.6)+
coord_flip()+
labs(title="30-Day Mortality by Procedure",
x=NULL,
y="Rate")+
theme_light()
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate)) +
geom_col(aes(fill = ahrq_ccs)) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs))+
geom_col(aes(fill = ahrq_ccs)) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col() +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position="dodge") +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position="dodge", aes(fill = "olivedrab", alpha = .5)) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position="dodge", fill = "olivedrab", alpha = .5) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position="dodge", fill = "olivedrab", alpha = .3) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position="dodge", fill = "olivedrab", aes(alpha = .3)) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position="dodge", fill = "olivedrab", alpha = .3) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position="dodge", fill = "olivedrab", alpha = .01) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position="dodge", fill = "olivedrab", alpha = 1) +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position="dodge", fill = "olivedrab" +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position="dodge", fill = "olivedrab") +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position = "dodge", fill = "olivedrab") +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery_new <- surgery %>%
mutate(mort30_n = ifelse(mort30 == "Yes", 1, 0),
complication_n = ifelse(complication =="Yes", 1, 0)) %>%
group_by(month) %>%
summarise(n_deaths=sum(mort30_n),
n_comp=sum(complication_n))
surgery_new
surgery %>% tabyl(month, mort30)
surgery %>% tabyl(month, complication)
surgery_new <- surgery %>%
mutate(mort30_n = ifelse(mort30 == "Yes", 1, 0),
complication_n = ifelse(complication =="Yes", 1, 0))
View(surgery_new)
surgery_new <- surgery %>%
mutate(mort30_n = ifelse(mort30 == "Yes", 1, 0),
complication_n = ifelse(complication =="Yes", 1, 0)) %>%
group_by(month) %>%
summarise(n_deaths=sum(mort30_n),
n_comp=sum(complication_n))
surgery_new
View(surgery_new)
surgery_new %>%
ggplot(aes(x=month, y=n_deaths))+
geom_col(alpha=0.8, fill="olivedrab", color="black")+
labs(title="30-Day Mortality by Month",
x=NULL,
y="Rate")+
scale_x_discrete(limits=c("Jan","Feb","Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))+
theme_light()
surgery_new %>%
ggplot(aes(x=month, y=n_deaths))+
geom_col(alpha=0.8, fill="olivedrab")+
labs(title="30-Day Mortality by Month",
x=NULL,
y="Rate")+
scale_x_discrete(limits=c("Jan","Feb","Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))+
theme_light()
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position = "dodge", alpha = .3, fill = "olivedrab") +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position = "dodge", alpha = 4, fill = "olivedrab") +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position = "dodge", alpha = .001, fill = "olivedrab") +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position = "dodge", alpha = .01, fill = "olivedrab") +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery %>%
ggplot(aes(x = reorder(ahrq_ccs, ccsmort30rate), y = ccsmort30rate, group = ahrq_ccs)) +
geom_col(position = "dodge", fill = "olivedrab") +
coord_flip() +
guides(fill = FALSE) +
labs(title = "Overall 30-day Mortality Rate by Operation",
x = NULL,
y = "Overall 30-day Mortality Rate (%)")
surgery_new %>%
ggplot(aes(x=month, y=n_deaths))+
geom_col(alpha=0.5, fill="olivedrab")+
labs(title="30-Day Mortality by Month",
x=NULL,
y="Rate")+
scale_x_discrete(limits=c("Jan","Feb","Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))+
theme_light()
surgery_new %>%
ggplot(aes(x=month, y=n_deaths))+
geom_col(fill="olivedrab")+
labs(title="30-Day Mortality by Month",
x=NULL,
y="Rate")+
scale_x_discrete(limits=c("Jan","Feb","Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))+
theme_light()
